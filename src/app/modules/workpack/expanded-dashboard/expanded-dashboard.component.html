<div class="app-expanded-dashboard" [class.responsive]="!!responsive">
  <app-card [properties]="cardDashboardProperties" *ngIf="dashboard" (changeFullScreen)="handleOnFullScreen()">
    <span class="workpack-fullName">
      {{workpackFullName}}
    </span>
    <div class="cards-list-container" *ngIf="dashboard?.stakeholders
        && dashboard?.stakeholders?.length > 0
        && dashboardShowStakeholders
        && dashboardShowStakeholders?.length > 0">
      <div class="card-container" *ngFor="let stakeholder of dashboard.stakeholders">
        <p-card>
          <div class="card-item">
            <div class="card-avatar-container">
              <i class="app-icon building" *ngIf="!!stakeholder?.actor.organization"></i>
              <app-avatar [edit]="false" *ngIf="!stakeholder?.actor.organization" [avatar]="stakeholder?.actor?.avatar">
              </app-avatar>
            </div>
            <div class="card-details" [class.person-details]="!stakeholder?.actor.organization">
              <span class="name">{{stakeholder?.actor?.name}}</span>
              <span class="role">{{stakeholder?.role}}</span>
            </div>
          </div>
        </p-card>
      </div>
    </div>
    <p-divider layout="horizontal" *ngIf="dashboard?.stakeholders
    && dashboard?.stakeholders?.length > 0
    && dashboardShowStakeholders
    && dashboardShowStakeholders?.length > 0"></p-divider>
    <div class="cards-list-container" *ngIf="dashboard">
      <div class="card-container" *ngFor="let workpackType of dashboard?.childrensByType">
        <p-card>
          <div class="card-item">
            <div class="card-avatar-container">
              <i [class]="iconsEnum[workpackType.type]"></i>
            </div>
            <div class="card-details">
              <span class="quantity">{{workpackType.quantity}}</span>
              <span class="type">{{workpackType.type.toLocaleLowerCase()|translate}}</span>
            </div>
          </div>
        </p-card>
      </div>
    </div>
    <p-divider layout="horizontal"></p-divider>
    <div class="params-container">
      <div class="param-item">
        <label class="param-label">{{'reference'|translate}}</label>
        <p-calendar class="app-select-date" [(ngModel)]="referenceMonth" view="month" [dateFormat]="calendarFormat"
          [yearNavigator]="true" showIcon="true" icon="fas fa-calendar-alt" [yearRange]="yearRange" [minDate]="startDate" [maxDate]="endDate"
          (ngModelChange)="handleSelectedReferenceMonth()" [readonlyInput]="true" inputId="monthpicker"></p-calendar>
      </div>
      <div class="param-item" *ngIf="workpackType === 'Project' && !!baselines && baselines?.length > 0">
        <label class="param-label">{{'baseline'|translate}}</label>
        <p-dropdown class="app-single-selection" [options]="baselines" optionLabel="name" optionValue="id" [autoDisplayFirst]="false"
          [(ngModel)]="selectedBaseline" optionLabel="name" (ngModelChange)="handleSeletedBaseline()"></p-dropdown>
      </div>
    </div>
    <div class="p-grid charts-container">
      <div class="p-col-12 p-md-12 p-lg-8">
        <app-triple-constraint-dashboard [tripleConstraint]="dashboard && dashboard.tripleConstraint">
        </app-triple-constraint-dashboard>
      </div>
      <div class="p-col-12 p-md-6 p-lg-2 dashboard-item" *ngIf="!!dashboardShowMilestones">
        <app-doughnut-chart [data]="dashboardMilestonesData" [middleText]="dashboard?.milestone?.quantity"
          midleTextBottom="MILESTONES"></app-doughnut-chart>
      </div>
      <div class="p-col-12 p-md-6 p-lg-2 dashboard-item" *ngIf="dashboardRisksData && dashboardShowRisks">
        <app-doughnut-chart [data]="dashboardRisksData" [middleText]="dashboard?.risk?.total" midleTextBottom="RISKS">
        </app-doughnut-chart>
      </div>
      <div class="p-col-12" *ngIf="dashboardShowEVA && dashboard.earnedValueAnalysis">
        <app-earned-value-analysis-dashboard [earnedValue]="dashboard.earnedValueAnalysis"></app-earned-value-analysis-dashboard>
      </div>
    </div>
  </app-card>
</div>
