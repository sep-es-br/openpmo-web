<nav class="app-menu mobile" [class.admin-menu]="isAdminMenu">
  <div class="menugeneral-icons-mobileview-container">
    <div
      *ngIf="itemsOffice?.length > 0"
      class="item"
      [pTooltip]="'officesAndPlans' | translate"
      [ngStyle]="{ width: itemsFavorites?.length > 0 && !!currentIDOffice && !!currentIDPlan && isPlanMenu ? '20%' : '25%' }"
      (click)="toggleMenu('office')"
    >
      <i class="app-icon offices"></i>
      <div class="item-label">
        {{ 'offices' | translate }}
      </div>
    </div>
    <div
      *ngIf="!!currentIDOffice && !!currentIDPlan && isPlanMenu"
      class="item"
      [ngStyle]="{ width: itemsFavorites?.length > 0 && !!currentIDOffice && !!currentIDPlan && isPlanMenu ? '20%' : '25%' }"
      [pTooltip]="currentPlan?.name"
      (click)="toggleMenu('portfolio')"
    >
      <i class="app-icon briefcase"></i>
      <div class="item-label">
        {{ currentPlan?.name }}
      </div>
    </div>
    <div
      *ngIf="itemsFavorites?.length > 0 && !!currentIDOffice && !!currentIDPlan && isPlanMenu"
      class="item"
      [ngStyle]="{width: '20%'}"
      [pTooltip]="'myFavorites' | translate"
      (click)="toggleMenu('favorites')"
    >
      <i class="favorite-icon far fa-star"></i>
      <div class="item-label">
        {{ 'myFavorites' | translate }}
      </div>
    </div>
    <div
      *ngIf="currentUserInfo?.isCcbMember"
      class="item"
      [routerLink]="['/ccbmember-baselines-view']"
      [ngStyle]="{width: itemsFavorites?.length > 0 && !!currentIDOffice && !!currentIDPlan && isPlanMenu ? '20%' : '25%'}"
      [pTooltip]="'changeControlBoard' | translate"
      (click)="toggleMenu('ccb')"
    >
      <i class="app-icon ccb-view"></i>
      <div
        class="item-label"
        [routerLink]="['/ccbmember-baselines-view']"
      >
        {{ 'changeControlBoard' | translate }}
      </div>
    </div>
    <div
      class="item"
      [routerLink]="['/search']"
      [ngStyle]="{width: itemsFavorites?.length > 0 && !!currentIDOffice && !!currentIDPlan && isPlanMenu ? '20%' : '25%'}"
      [pTooltip]="'universalSearch' | translate"
      (click)="toggleMenu('universal-search')"
    >
      <i class="search-icon fas fa-search"></i>
      <div
        class="item-label"
        [routerLink]="['/search']"
      >
        {{ 'universalSearch' | translate }}
      </div>
    </div>
  </div>
</nav>

<div class="menu-layout" *ngIf="(isMenuOpen() && isMobileView) || isMenuOpen('user')" (click)="closeAllMenus()"></div>

<div class="app-menu-slide" #menuSliderOffices [class.open]="isMenuOpen('office')" [class.mobile]="isMobileView"
  [class.changing]="isChangingView">
  <div class="top-bar">
    <div class="title" (click)="closeAllMenus()" [routerLink]="['/offices']">{{ (isAdminMenu ? 'offices' :
      'officesAndPlans') | translate }}
    </div>
  </div>
  <p-panelMenu [model]="itemsOffice"></p-panelMenu>
  <div class="action-mobile">
    <i class="app-icon angle-down" [ngStyle]="{ fontSize: '1rem' }" (click)="closeAllMenus()"></i>
  </div>
</div>

<div class="app-menu-slide" [class.open]="isMenuOpen('favorites')" [class.mobile]="isMobileView"
  [class.changing]="isChangingView">
  <div class="top-bar">
    <div class="title" (click)="closeAllMenus()">{{ (isAdminMenu ? 'favorites' : 'myFavorites') | translate }}
    </div>
  </div>
  <div class="f-panelmenu">
    <div class="f-panelmenu-item" [title]="item.title" [class]="item.styleClass" *ngFor="let item of itemsFavorites">
      <div class="f-panelmenu-container" (click)="handleNavigateFavorite(item)">
        <div class="f-panelmenu-icon">
          <i [class]="item.icon"></i>
        </div>
        <div class="f-panelmenu-label">
          <span>{{item.label}}</span>
        </div>
      </div>
      <div class="f-panelmenu-trash">
        <i class="fas fa-trash-alt" (click)="handleRemoveFavorite(item.id)"
          [pTooltip]="'removeFavorite' | translate"></i>
      </div>
    </div>
  </div>
  <div class="action-mobile">
    <i class="app-icon angle-down" [ngStyle]="{ fontSize: '1rem' }" (click)="closeAllMenus()"></i>
  </div>
</div>

<div class="app-menu-slide" #menuSliderPortfolio [class.open]="isMenuOpen('portfolio')" [class.mobile]="isMobileView"
  [class.changing]="isChangingView">
  <div class="top-bar">
    <div *ngIf="currentPlan" class="title" (click)="closeAllMenus()" [routerLink]="['/plan']"
      [queryParams]="{id: currentPlan?.id}">
      {{currentPlan?.name}}</div>
    <div class="action" *ngIf="!isMobileView && currentPlan">
      <i class="app-icon arrow-left" [ngStyle]="{ fontSize: '1rem' }" (click)="closeAllMenus()"></i>
    </div>
    <div *ngIf="!currentPlan" class="title">
      {{'newPlan' | translate}}</div>
  </div>
  <span *ngIf="loadingMenuPortfolio" style="padding: 1em">{{'loadingEllipsis'|translate}}</span>
  <p-panelMenu *ngIf="!loadingMenuPortfolio" [model]="itemsPortfolio"></p-panelMenu>
  <div class="action-mobile" *ngIf="isMobileView">
    <i class="app-icon angle-down" [ngStyle]="{ fontSize: '1rem' }" (click)="toggleMenu('portfolio')"></i>
  </div>
</div>

<div class="app-menu-slide" #menuSliderPlanModel [class.open]="isMenuOpen('plan-model')" [class.mobile]="isMobileView"
  [class.changing]="isChangingView">
  <div class="top-bar">
    <div class="title" (click)="closeAllMenus()" [routerLink]="['/strategies']"
      [queryParams]="{idOffice: currentIDOffice}">{{ 'planModels' | translate }}</div>
    <div class="action" *ngIf="!isMobileView">
      <i class="app-icon arrow-left" [ngStyle]="{ fontSize: '1rem' }" (click)="closeAllMenus()"></i>
    </div>
  </div>
  <p-panelMenu [model]="itemsPlanModel"></p-panelMenu>
  <div class="action-mobile" *ngIf="isMobileView">
    <i class="app-icon angle-down" [ngStyle]="{ fontSize: '1rem' }" (click)="toggleMenu(MenuButtons.PLAN_MODEL)"></i>
  </div>
</div>

<div class="app-menu-slide user-slide" [class.open]="isMenuOpen('user')" [class.mobile]="isMobileView"
  [class.changing]="isChangingView">
  <div class="top-bar">
    <div class="title" [pTooltip]="currentUserInfo?.fullName || currentUserInfo?.name">{{ currentUserInfo?.name }}</div>
  </div>
  <div class="item" [routerLink]="['/persons/profile']" (click)="closeAllMenus()">
    <i class="fas fa-user" [ngStyle]="{ fontSize: '1.3rem' }"></i>
    <span>{{ 'profile' | translate }}</span>
  </div>
  <div class="languages" *ngIf="!isMobileView">
    <p-tieredMenu [model]="itemsLanguages"></p-tieredMenu>
  </div>
  <div class="languages" *ngIf="!!isMobileView">
    <p-panelMenu [model]="itemsLanguages"></p-panelMenu>
  </div>
  <div class="item" [routerLink]="['/administrators']" *ngIf="!!isUserAdmin" (click)="closeAllMenus()">
    <i class="fas fa-users-cog" [ngStyle]="{ fontSize: '1.4rem' }"></i>
    <span>{{ 'administrators' | translate }}</span>
  </div>
  <div class="logout" (click)="authSrv.signOut()">
    <i class="app-icon sign-out-alt" [ngStyle]="{ fontSize: '1rem' }"></i>
    <span>{{ 'logout' | translate }}</span>
  </div>
</div>

<div class="app-menu-slide mobile" [class.open]="isMenuOpen('more')" [class.changing]="isChangingView">
  <div class="more-menu">
    <div class="item" (click)="closeAllMenus()" [routerLink]="['/organizations']"
      [queryParams]="{ idOffice: currentIDOffice }">
      <span class="icon-wrapper">
        <i class="app-icon building" [ngStyle]="{ fontSize: '1.8rem' }"></i>
      </span>
      <span class="menu-label">{{ 'organizations' | translate }}</span>
    </div>
    <div class="item" (click)="closeAllMenus()" [routerLink]="['/domains']"
      [queryParams]="{ idOffice: currentIDOffice }">
      <span class="icon-wrapper">
        <i class="app-icon map-marked" [ngStyle]="{ fontSize: '1.7rem' }"></i>
      </span>
      <span class="menu-label">{{ 'domains' | translate }}</span>
    </div>
    <div class="item" (click)="closeAllMenus()" [routerLink]="['/measure-units']"
      [queryParams]="{ idOffice: currentIDOffice }">
      <span class="icon-wrapper">
        <i class="app-icon unit-selection-alt" [ngStyle]="{ fontSize: '1rem' }"></i>
      </span>
      <span class="menu-label">{{ 'measureUnits' | translate }}</span>
    </div>
    <div class="item" (click)="closeAllMenus()" [routerLink]="['/offices/permission']"
      [queryParams]="{ idOffice: currentIDOffice }">
      <span class="icon-wrapper">
        <i class="app-icon permission2" [ngStyle]="{ fontSize: '1.5rem' }"></i>
      </span>
      <span class="menu-label">{{ 'officePermissions' | translate }}</span>
    </div>
    <div class="item" (click)="closeAllMenus()" [routerLink]="['/persons']"
      [queryParams]="{ idOffice: currentIDOffice }">
      <span class="icon-wrapper">
        <i class="app-icon users" [ngStyle]="{ fontSize: '1.5rem' }"></i>
      </span>
      <span class="menu-label">{{ 'people' | translate }}</span>
    </div>
  </div>
  <div class="action-mobile">
    <i class="app-icon angle-down" [ngStyle]="{ fontSize: '1rem' }" (click)="toggleMenu('more')"></i>
  </div>
</div>

<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"
  rejectButtonStyleClass="p-button-text"></p-confirmDialog>
